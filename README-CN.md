# GalSceneEditor

一个功能强大、界面友好的Galgame场景编辑器，帮助游戏开发者轻松创建和编辑视觉小说游戏场景。

## 🚀 功能特性

### 场景编辑
- **背景管理**：支持选择和切换不同的背景图片
- **立绘系统**：支持多立绘同时显示、缩放和拖拽定位
- **音频控制**：BGM、音效和语音管理，支持BGM自动循环播放
- **文本编辑**：角色名称和对话内容编辑，支持字体和字号调整
- **旁白模式**：支持设置无角色名称的旁白文本

### 项目管理
- **项目操作**：创建、打开、保存项目
- **多格式支持**：支持JSON和XML格式的项目文件
- **续写功能**：支持向现有项目文件追加新场景

### 资源管理
- **资源自动扫描**：自动扫描并加载resources文件夹中的各类资源
- **语音导入**：支持导入新的语音文件到资源库

### 用户体验
- **实时预览**：场景编辑实时预览功能
- **全屏模式**：支持切换全屏预览效果
- **响应式设计**：界面自适应窗口大小变化

## 🛠️ 技术栈

- **开发语言**：Python
- **GUI框架**：PyQt5
- **文件格式**：JSON、XML
- **音频支持**：MP3、WAV、OGG

## 📥 安装说明

### 环境要求
- Python 3.6+ 
- PyQt5 5.15.9+

### 安装步骤

1. **克隆项目**
   ```bash
   git clone https://your-repository-url/GalSceneEditor.git
   cd GalSceneEditor
   ```

2. **安装依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **运行应用程序**
   ```bash
   python src/main.py
   ```

## 📖 使用指南

### 基础操作

1. **创建新项目**：点击"新建项目"按钮，选择保存路径和文件格式
2. **打开项目**：点击"打开项目"按钮，选择已有的项目文件
3. **保存项目**：点击"保存项目"按钮，保存当前编辑的内容

### 场景编辑

1. **设置背景**：在左侧"背景"下拉菜单中选择背景图片
2. **添加立绘**：在"立绘"区域选择要显示的立绘图片，使用滑块调整大小
3. **调整立绘位置**：在预览区域直接拖拽立绘到合适位置
4. **添加音频**：
   - 在"音频"区域选择BGM、音效和语音
   - 点击"导入"按钮可添加新的语音文件
5. **编辑文本**：
   - 输入角色姓名并点击"更新"
   - 在文本框中输入对话内容
   - 选择字体和调整字号

### 全屏预览

按下 `Alt+Enter` 键可以切换全屏预览模式，再次按下可退出全屏。

## 📁 项目结构

```
GalSceneEditor/
├── logs/                  # 日志文件
├── output/                # 输出文件夹
├── requirements.txt       # 项目依赖
├── resources/             # 资源文件夹
│   ├── background/        # 背景图片
│   ├── background_music/  # 背景音乐
│   ├── font/              # 字体文件
│   ├── icon/              # 图标文件
│   ├── portrait/          # 角色立绘
│   ├── sound/             # 音效文件
│   └── voice/             # 语音文件
└── src/                   # 源代码目录
    ├── assets/            # 应用程序资源
    ├── config/            # 配置相关
    ├── controllers/       # 控制器
    ├── main.py            # 主程序入口
    ├── models/            # 数据模型
    ├── services/          # 服务层
    ├── utils/             # 工具函数
    └── views/             # 用户界面
```

## 🔧 配置说明

应用程序配置位于 `src/config/settings.py` 文件中，可以修改以下主要配置：

- `app`: 应用程序基本信息
- `editor`: 编辑器配置，如支持的立绘数量、默认字体等
- `paths`: 资源、输出和日志路径
- `logging`: 日志级别和文件大小配置

## 🤝 贡献指南

1. 创建您的特性分支 (`git checkout -b feature/AmazingFeature`)
2. 提交您的更改 (`git commit -m 'Add some AmazingFeature'`)
3. 推送到分支 (`git push origin feature/AmazingFeature`)
4. 开启 Pull Request

## 📝 注意事项

- 请确保所有资源文件放在正确的目录下
- 大型项目建议定期保存，避免意外关闭导致数据丢失
- 如需添加新的资源类型，请确保更新相应的资源处理代码

## 📧 联系我

如有问题或建议，请通过以下方式联系我：
- Email: xuyehui2023@gmail.com
- GitHub: [TymRina](https://github.com/TymRina)
